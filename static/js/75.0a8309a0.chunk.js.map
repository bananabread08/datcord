{"version":3,"file":"static/js/75.0a8309a0.chunk.js","mappings":"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","sources":["pages/Home/Home.js"],"sourcesContent":["import React, { useState, useEffect, Suspense } from 'react';\nimport styled from 'styled-components';\nimport { useUserAuth } from '../../context/UserAuthContext';\nimport {\n  doc,\n  collection,\n  onSnapshot,\n  updateDoc,\n  addDoc,\n  serverTimestamp,\n} from 'firebase/firestore';\nimport { db } from '../../firebase-config';\nimport { Outlet, useNavigate } from 'react-router-dom';\nconst Wrapper = styled.div`\n  display: flex;\n  width: 100%;\n  height: 100vh;\n`;\n\nconst Servers = React.lazy(() => import('../../components/Servers/Servers'));\nconst Channels = React.lazy(() => import('../../components/Channels/Channels'));\nconst UserPanel = React.lazy(() =>\n  import('../../components/UserPanel/UserPanel')\n);\nconst Profile = React.lazy(() => import('../../components/Profile/Profile'));\nexport default function Home({ theme, toggleTheme, servers, serverChannels }) {\n  const [currentUser, setCurrentUser] = useState([]);\n  const [allUsers, setAllUsers] = useState([]);\n  const [showProfile, setShowProfile] = useState(false);\n  const [showInput, setShowInput] = useState(false);\n  const [channelName, setChannelName] = useState('');\n  const [showRight, setShowRight] = useState(false);\n  const [showLeft, setShowLeft] = useState(false);\n  const { user, logOut } = useUserAuth();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const unsub = onSnapshot(doc(db, `users/${user.uid}`), (snapshot) => {\n      setCurrentUser(snapshot.data());\n    });\n    return () => unsub();\n  }, [user]);\n\n  useEffect(() => {\n    const unsub = onSnapshot(collection(db, 'users'), (snapshot) => {\n      setAllUsers(snapshot.docs.map((doc) => doc.data()));\n    });\n    return unsub;\n  }, []);\n\n  const handleLeftNav = () => setShowLeft((prevState) => !prevState);\n  const handleRightNav = () => setShowRight((prevState) => !prevState);\n  const handleProfileView = () => setShowProfile((prevState) => !prevState);\n  const handleLogOut = async () => {\n    try {\n      await logOut();\n      await updateDoc(doc(db, 'users', `${user.uid}`), {\n        isOnline: false,\n      });\n      navigate('/');\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleInputView = () => setShowInput((prevState) => !prevState);\n  const handleChange = (e) => setChannelName(e.target.value);\n  const addChannel = async (e) => {\n    e.preventDefault();\n    try {\n      if (channelName === '' || channelName === ' ' || channelName.length < 3)\n        return alert('Cannot be blank and must be greater than 2 characters');\n      await addDoc(collection(db, 'servers/1kU49xyjRsrEE6KlUXub', 'channels'), {\n        name: channelName,\n        createdAt: serverTimestamp(),\n      });\n      setShowInput(false);\n      setChannelName('');\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <Wrapper>\n      {showProfile ? (\n        <Profile\n          handleProfileView={handleProfileView}\n          handleLogOut={handleLogOut}\n          currentUser={currentUser}\n        />\n      ) : (\n        <>\n          <Suspense fallback={<div>Loading...</div>}>\n            <Servers\n              theme={theme}\n              toggleTheme={toggleTheme}\n              servers={servers}\n              showLeft={showLeft}\n            ></Servers>\n            <Channels\n              servers={servers}\n              serverChannels={serverChannels}\n              currentUser={currentUser}\n              handleProfileView={handleProfileView}\n              addChannel={addChannel}\n              handleInputView={handleInputView}\n              showInput={showInput}\n              handleChange={handleChange}\n              showLeft={showLeft}\n            />\n            <Outlet\n              context={[currentUser, allUsers, handleRightNav, handleLeftNav]}\n            />\n            <UserPanel allUsers={allUsers} showRight={showRight} />\n          </Suspense>\n        </>\n      )}\n    </Wrapper>\n  );\n}\n"],"names":["Wrapper","styled","Servers","React","Channels","UserPanel","Profile","Home","theme","toggleTheme","servers","serverChannels","useState","currentUser","setCurrentUser","allUsers","setAllUsers","showProfile","setShowProfile","showInput","setShowInput","channelName","setChannelName","showRight","setShowRight","showLeft","setShowLeft","useUserAuth","user","logOut","navigate","useNavigate","useEffect","unsub","onSnapshot","doc","db","uid","snapshot","data","collection","docs","map","handleProfileView","prevState","handleLogOut","updateDoc","isOnline","console","log","addChannel","e","preventDefault","length","alert","addDoc","name","createdAt","serverTimestamp","Suspense","fallback","handleInputView","handleChange","target","value","context"],"sourceRoot":""}